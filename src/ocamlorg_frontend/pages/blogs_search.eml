let render ~total ~search blogs = Layout.render ~title:"OCaml blogs Â· Search Result"
~description:"find blog post by institution."
~canonical:(Url.blogs_search ^ "?p=" ^ search)
~active_top_nav_item:Header.Blog @@
<div class="bg-white">
  <div class="py-10 lg:py-14">
    <div class="container-fluid">
      <div class="flex flex-col lg:px-28 gap-2 max-w-5xl">
        <form action="/packages/search" method="GET">
          <div class="flex items-center justify-center">
            <input
              type="search"
              name="q" id="q2"
              class="packages_search__search__input w-full focus:border-gray-800 text-gray-800 border-primary-600 h-10 rounded-l-md appearance-none px-4 py-1"
              value="<%s search %>"
              placeholder="Search OCaml blogs">
            <button aria-label="search" class="h-10 rounded-r-md bg-primary-600 text-white flex items-center justify-center px-4">
              <%s! Icons.magnifying_glass "w-6 h-6 text-white" %>
            </button>
          </div>
        </form>

        <div class="prose max-w-5xl">
          <h1 class="font-bold text-2xl mb-5 md:mb-0">
            <% (match total with
              | 0 -> %> No search results for "<%s search %>"
            <% | 1 -> %> 1 search result for "<%s search %>"
            <% | _ -> %> <%s string_of_int total ^ " search results for \"" ^ search ^ "\"" %>
            <% ); %>
          </h1>

          <% if List.length blogs = 0 then ( %>
          <p>
            We didn't find a match for "<%s search %>".
          </p>
          <p>
            <strong>Search tips:</strong>
          </p>
          <% ); %>
        </div>

        <% if List.length blogs > 0 then ( %>
        <ol class="flex flex-col">
            <% blogs |> List.iter (fun (item : Data.Planet.t) -> %>
                    <div>
                      <div class="font-semibold text-gray-400">FEATURED</div>
                      <div class="flex flex-col-reverse lg:flex-row lg:gap-12">
                          <div class="space-y-3 mt-6 lg:mt-0 flex flex-col flex-1">
                              <a href="<%s Option.value ~default:(Url.blog_post item.slug) item.url %>"
                                  class="block text-xl font-semibold hover:text-primary-600"><%s item.title %></a>
                              <a href="<%s Option.value ~default:(Url.blog_post item.slug) item.url %>" class="text-body-400">
                                  <%s Option.value ~default:"" item.description %>
                              </a>
                              <div class="text-body-400 flex space-x-2.5 text-sm">
                                  <div><%s Utils.human_time item.date %></div>
                              </div>
                          </div>
                          <% (match item.preview_image with | None -> () | Some image -> %>
                          <div class="flex-none w-64">
                              <a href="<%s Option.value ~default:(Url.blog_post item.slug) item.url %>"><img class="w-full" src="<%s image %>" alt=""></a>
                          </div>
                          <% ); %>
                      </div>
                    </div>
                    <% ); %>
        </ol>
        <% ); %>
      </div>
    </div>
  </div>
</div>
