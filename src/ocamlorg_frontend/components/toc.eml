type toc = {
title : string;
href : string;
children : toc list
}

type t = toc list

let render (t : t) =
  <div>
    <% (match t with [] ->  %>
    <span class="block py-2">No table of contents</span>
    <% | _ -> %>
    <ul class="leading-6 space-y-1">
      <% t |> List.iter begin fun item -> %>
        <li>
          <a href="<%s item.href %>" class="text-gray-700 block py-2 md:p-0 transition-colors hover:text-gray-900 font-medium">
            <%s! item.title %>
          </a>
            <% match item.children with [] -> () | items -> %>
            <ul>
              <% items |> List.iter begin fun item -> %>
              <li>
                <a href="<%s item.href %>" class="text-gray-700 py-1 md:p-0 font-light block transition-colors hover:text-gray-900">
                  <%s! item.title %>
                </a>
              </li>
              <% end; %>
            </ul>
            <% ; %>
          </li>
          <% end; %>
        </li>
    </ul>
    <% ); %>
  </div>
